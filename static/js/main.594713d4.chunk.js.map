{"version":3,"sources":["page/account/AccountPage.tsx","page/account/LoginPage.tsx","page/friend/FriendListPage.tsx","App.tsx","index.tsx"],"names":["AccountPage","alter","setPath","React","useState","phoneNumber","setPhoneNumber","isJoinSuccess","setSuccess","error","setError","loading","setLoading","to","className","type","placeholder","value","onChange","e","target","onClick","event","preventDefault","fetch","process","method","headers","body","JSON","stringify","id","then","res","json","ok","catch","finally","LoginPage","setLogin","localStorage","setItem","FriendListPage","token","getItem","currentType","setType","shouldFetch","setShouldFetch","0","list","page","total","1","2","data","setData","useEffect","console","log","map","user","isFollow","follow","App","Boolean","isLogin","path","removeItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.594713d4.chunk.js","sourcesContent":["import React from \"react\";\nimport { Redirect } from \"react-router\";\nimport { Link } from \"react-router-dom\";\n\ninterface IProps {\n  alter?: boolean;\n  setPath?: any;\n}\nconst AccountPage = ({ alter = false, setPath }: IProps) => {\n  const [phoneNumber, setPhoneNumber] = React.useState(\"\");\n  const [isJoinSuccess, setSuccess] = React.useState(false);\n  const [error, setError] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(false);\n\n  setPath && setPath();\n\n  const joinHandler = () => {\n    if (phoneNumber === \"\" && !loading) return;\n    setLoading(true);\n    fetch(process.env.REACT_APP_API_URL + \"/join\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ id: phoneNumber }),\n    })\n      .then((res) => res.json())\n      .then((json) => {\n        if (json.ok) {\n          setSuccess(true);\n        } else {\n          setError(\"아이디가 이미 존재합니다.\");\n        }\n      })\n      .catch((error) => setError(\"서버와의 연결 문제가 있습니다.\"))\n      .finally(() => setLoading(false));\n  };\n  return isJoinSuccess ? (\n    <Redirect to=\"/\" />\n  ) : (\n    <div className=\"flex h-full items-center justify-center\">\n      <div className=\" h-60 w-1/3 max-w-sm mb-56 border border-gray-300 bg-white flex flex-col p-10\">\n        <div className=\" w-full pb-1 mb-2 text-gray-500 text-sm\">\n          {alter ? \"수정\" : \"회원가입\"}\n        </div>\n        <form className=\"flex flex-col\">\n          <input\n            className=\" w-full h-10 border border-gray-300 rounded-lg p-2\"\n            type=\"text\"\n            placeholder=\"전화번호\"\n            value={phoneNumber}\n            onChange={(e) => {\n              setPhoneNumber(e.target.value);\n            }}\n          />\n          {error !== \"\" && <div className=\" text-red-500 text-sm\">{error}</div>}\n          <button\n            className=\"w-full h-10 my-4 bg-blue-500 text-white border rounded-lg p-2 active:bg-blue-400\"\n            onClick={(event) => {\n              event.preventDefault();\n              joinHandler();\n            }}\n          >\n            {loading ? \"...\" : alter ? \"수정\" : \"회원가입\"}\n          </button>\n        </form>\n        {!alter && (\n          <div className=\"text-sm\">\n            로그인 페이지로{\" \"}\n            <Link to=\"/login\" className=\" text-blue-500 font-bold\">\n              이동\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AccountPage;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ninterface IProps {\n  setLogin: (isLogin: boolean) => void;\n}\n\nconst LoginPage = ({ setLogin }: IProps) => {\n  const [phoneNumber, setPhoneNumber] = React.useState(\"\");\n  const [error, setError] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(false);\n\n  const loginHandler = () => {\n    if (phoneNumber === \"\" && !loading) return;\n    setLoading(true);\n\n    // dev\n    localStorage.setItem(\"token\", \"token\");\n    setLogin(true);\n    return;\n\n    fetch(process.env.REACT_APP_API_URL + \"/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ id: phoneNumber }),\n    })\n      .then((res) => res.json())\n      .then((json) => {\n        console.log(json);\n        if (json.ok) {\n          localStorage.setItem(\"token\", json.token);\n          setLogin(true);\n        } else {\n          setError(\"아이디가 틀렸습니다.\");\n        }\n      })\n      .catch(() => setError(\"서버와의 연결 문제가 있습니다.\"))\n      .finally(() => setLoading(false));\n  };\n  return (\n    <div className=\"flex h-full items-center justify-center\">\n      <div className=\" h-60 w-1/3 max-w-sm mb-56 border border-gray-300 bg-white flex flex-col p-10\">\n        <div className=\" w-full pb-1 mb-2 text-gray-500 text-sm\">로그인</div>\n        <form className=\"flex flex-col\">\n          <input\n            className=\" w-full h-10 border border-gray-300 rounded-lg p-2\"\n            type=\"text\"\n            placeholder=\"전화번호\"\n            value={phoneNumber}\n            onChange={(e) => setPhoneNumber(e.target.value)}\n          />\n          {error !== \"\" && <div className=\" text-red-500 text-sm\">{error}</div>}\n          <button\n            className=\"w-full h-10 my-4 bg-blue-500 text-white border rounded-lg p-2 active:bg-blue-400\"\n            type=\"button\"\n            onClick={(event) => {\n              event.preventDefault();\n              loginHandler();\n            }}\n          >\n            {loading ? \"...\" : \"로그인\"}\n          </button>\n        </form>\n        <div className=\"text-sm\">\n          계정이 없으신가요?{\" \"}\n          <Link to=\"/join\" className=\" text-blue-500 font-bold\">\n            가입하기\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","import { listenerCount } from \"node:events\";\nimport React from \"react\";\n\ninterface IUser {\n  id: number;\n  phoneNumber: string;\n  isFollow: boolean;\n}\n\ninterface IData {\n  [type: number]: {\n    list: IUser[];\n    error?: any;\n    loading: boolean;\n    page: number;\n    total: number;\n  };\n}\n\ninterface IProps {\n  setPath?: any;\n}\n\nconst FriendListPage = ({ setPath }: IProps) => {\n  setPath && setPath();\n  const token = localStorage.getItem(\"token\");\n  const [currentType, setType] = React.useState(0);\n  const [shouldFetch, setShouldFetch] = React.useState(true);\n  const [data, setData] = React.useState<IData>({\n    0: {\n      list: [],\n      error: null,\n      loading: false,\n      page: 0,\n      total: 0,\n    },\n    1: {\n      list: [],\n      error: null,\n      loading: false,\n      page: 0,\n      total: 0,\n    },\n    2: {\n      list: [],\n      error: null,\n      loading: false,\n      page: 0,\n      total: 0,\n    },\n  });\n\n  const follow = (id: number) => {\n    fetch(process.env.REACT_APP_API_URL + \"/follow?opponent=\" + id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": token!,\n      },\n    })\n      .then((res) => res.json())\n      .then((json) => {\n        console.log(json);\n      });\n  };\n  const unfollow = (id: number) => {\n    fetch(process.env.REACT_APP_API_URL + \"/unfollow?opponent=\" + id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": token!,\n      },\n    })\n      .then((res) => res.json())\n      .then((json) => {\n        console.log(json);\n      });\n  };\n  const fetchList = () => {\n    const urlMap = [\"/recommend\", \"/follows\", \"/followers\"];\n    fetch(\n      process.env.REACT_APP_API_URL +\n        urlMap[currentType] +\n        \"?page=\" +\n        (data[currentType].page + 1),\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-access-token\": token!,\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((json) => {\n        console.log(json);\n        if (json.ok) {\n          setData({\n            ...data,\n            [currentType]: {\n              loading: false,\n              list: [...data[currentType].list, ...json.list],\n              error: null,\n              page: json.page,\n              total: json.total,\n            },\n          });\n        }\n      });\n  };\n\n  React.useEffect(() => {\n    if (shouldFetch) {\n      setData({\n        ...data,\n        [currentType]: {\n          ...data[currentType],\n          loading: true,\n        },\n      });\n\n      fetchList();\n\n      setShouldFetch(false);\n    }\n  }, [shouldFetch]);\n  return (\n    <div className=\" w-3/4 mx-auto mt-10 flex flex-col flex-1\">\n      <ul className=\"ml-4 flex text-gray-700\">\n        <li\n          className={`cursor-pointer mr-4 ${\n            currentType === 0 && \"text-blue-500\"\n          }`}\n          onClick={() => currentType !== 0 && setType(0)}\n        >\n          추천\n        </li>\n        <li\n          className={`cursor-pointer mr-4 ${\n            currentType === 1 && \"text-blue-500\"\n          }`}\n          onClick={() => currentType !== 1 && setType(1)}\n        >\n          팔로우\n        </li>\n        <li\n          className={`cursor-pointer mr-4 ${\n            currentType === 2 && \"text-blue-500\"\n          }`}\n          onClick={() => currentType !== 2 && setType(2)}\n        >\n          팔로워\n        </li>\n      </ul>\n      <ul className=\"flex-1 bg-white mt-2 rounded-sm border\">\n        {data[currentType].list.map((e) => (\n          <li key={e.id}>\n            <div>\n              <span>{e.phoneNumber}</span>\n              <button\n                onClick={() => {\n                  setData({\n                    ...data,\n                    [currentType]: {\n                      ...data[currentType],\n                      list: data[currentType].list.map((user) =>\n                        user.id === e.id\n                          ? { ...user, isFollow: !user.isFollow }\n                          : user\n                      ),\n                    },\n                  });\n                  e.isFollow ? unfollow(e.id) : follow(e.id);\n                }}\n              >\n                {e.isFollow ? \"언팔로우\" : \"팔로우\"}\n              </button>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default FriendListPage;\n","import React from \"react\";\nimport {\n  BrowserRouter,\n  Route,\n  Switch,\n  Redirect,\n  Link,\n  useRouteMatch,\n} from \"react-router-dom\";\nimport AccountPage from \"./page/account/AccountPage\";\nimport LoginPage from \"./page/account/LoginPage\";\nimport FriendListPage from \"./page/friend/FriendListPage\";\n\nfunction App() {\n  const [isLogin, setLogin] = React.useState(\n    Boolean(localStorage.getItem(\"token\"))\n  );\n  const [path, setPath] = React.useState(0);\n\n  const BASE_URL = process.env.REACT_APP_BASE_URL;\n  console.log(BASE_URL, process.env.NODE_ENV);\n\n  return (\n    <div className=\"h-screen flex flex-col\">\n      <BrowserRouter>\n        <Switch>\n          {isLogin ? (\n            <>\n              <div className=\"w-screen h-12 flex justify-end items-center px-12 border-b border-gray-300 bg-white\">\n                <Link\n                  to=\"/friends\"\n                  className={`text-gray-700 mr-4 ${\n                    path === 0 && \"text-blue-500\"\n                  }`}\n                >\n                  친구들\n                </Link>\n                <Link\n                  to=\"/update\"\n                  className={`text-gray-700 mr-4 ${\n                    path === 1 && \"text-blue-500\"\n                  }`}\n                >\n                  정보수정\n                </Link>\n                <span\n                  className=\"text-gray-700 cursor-pointer\"\n                  onClick={() => {\n                    localStorage.removeItem(\"token\");\n                    setLogin(false);\n                  }}\n                >\n                  로그아웃\n                </span>\n              </div>\n              <Route path=\"/friends\">\n                <FriendListPage setPath={() => setPath(0)} />\n              </Route>\n              <Route path=\"/update\">\n                <AccountPage alter={true} setPath={() => setPath(1)} />\n              </Route>\n              <Route path=\"*\">\n                <Redirect to=\"/friends\" />\n              </Route>\n            </>\n          ) : (\n            <>\n              <Route path=\"/login\">\n                <LoginPage setLogin={setLogin} />\n              </Route>\n              <Route path=\"/join\">\n                <AccountPage />\n              </Route>\n              <Route path=\"*\">\n                <Redirect to=\"/login\" />\n              </Route>\n            </>\n          )}\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}